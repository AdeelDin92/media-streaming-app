{"ast":null,"code":"import React,{useState}from'react';import UploadArea from'./UploadArea';import'../style.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Sidebar(_ref){let{onFileSelect}=_ref;const[files,setFiles]=useState([]);const handleFileUpload=async newFiles=>{const formData=new FormData();formData.append('file',newFiles[0]);try{const response=await fetch(\"\".concat(process.env.REACT_APP_BACKEND_URL,\"/upload/\"),{method:'POST',body:formData});const result=await response.json();console.log('File uploaded:',result);if(result.media_id){setFiles([...files,newFiles[0]]);onFileSelect(result.media_id);// Pass media_id instead of URL\n}}catch(error){console.error('Error uploading file:',error);}};const handleReset=()=>{setFiles([]);onFileSelect(null);// Clear the media player when reset\n};return/*#__PURE__*/_jsx(\"div\",{className:\"sidebar\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"upload-container\",children:[/*#__PURE__*/_jsx(UploadArea,{onFileUpload:handleFileUpload}),/*#__PURE__*/_jsx(\"div\",{className:\"file-list\",children:files.length===0?/*#__PURE__*/_jsx(\"p\",{children:\"No files uploaded yet.\"}):files.map((file,index)=>/*#__PURE__*/_jsx(\"p\",{children:file.name},index))}),/*#__PURE__*/_jsx(\"button\",{className:\"reset-button\",onClick:handleReset,children:\"Reset Uploads\"})]})});}export default Sidebar;","map":{"version":3,"names":["React","useState","UploadArea","jsx","_jsx","jsxs","_jsxs","Sidebar","_ref","onFileSelect","files","setFiles","handleFileUpload","newFiles","formData","FormData","append","response","fetch","concat","process","env","REACT_APP_BACKEND_URL","method","body","result","json","console","log","media_id","error","handleReset","className","children","onFileUpload","length","map","file","index","name","onClick"],"sources":["C:/Users/Addy/OneDrive/Desktop/media-streaming-app/media_frontend/src/components/Sidebar.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport UploadArea from './UploadArea';\r\nimport '../style.css';\r\n\r\nfunction Sidebar({ onFileSelect }) {\r\n  const [files, setFiles] = useState([]);\r\n\r\n  const handleFileUpload = async (newFiles) => {\r\n    const formData = new FormData();\r\n    formData.append('file', newFiles[0]);\r\n\r\n    try {\r\n      const response = await fetch(`${process.env.REACT_APP_BACKEND_URL}/upload/`, {\r\n        method: 'POST',\r\n        body: formData,\r\n      });\r\n      const result = await response.json();\r\n      console.log('File uploaded:', result);\r\n      if (result.media_id) {\r\n        setFiles([...files, newFiles[0]]);\r\n        onFileSelect(result.media_id); // Pass media_id instead of URL\r\n      }\r\n    } catch (error) {\r\n      console.error('Error uploading file:', error);\r\n    }\r\n  };\r\n\r\n  const handleReset = () => {\r\n    setFiles([]);\r\n    onFileSelect(null); // Clear the media player when reset\r\n  };\r\n\r\n  return (\r\n    <div className=\"sidebar\">\r\n      <div className=\"upload-container\">\r\n        <UploadArea onFileUpload={handleFileUpload} />\r\n        <div className=\"file-list\">\r\n          {files.length === 0 ? (\r\n            <p>No files uploaded yet.</p>\r\n          ) : (\r\n            files.map((file, index) => <p key={index}>{file.name}</p>)\r\n          )}\r\n        </div>\r\n        <button className=\"reset-button\" onClick={handleReset}>Reset Uploads</button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Sidebar;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,KAAQ,OAAO,CACvC,MAAO,CAAAC,UAAU,KAAM,cAAc,CACrC,MAAO,cAAc,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEtB,QAAS,CAAAC,OAAOA,CAAAC,IAAA,CAAmB,IAAlB,CAAEC,YAAa,CAAC,CAAAD,IAAA,CAC/B,KAAM,CAACE,KAAK,CAAEC,QAAQ,CAAC,CAAGV,QAAQ,CAAC,EAAE,CAAC,CAEtC,KAAM,CAAAW,gBAAgB,CAAG,KAAO,CAAAC,QAAQ,EAAK,CAC3C,KAAM,CAAAC,QAAQ,CAAG,GAAI,CAAAC,QAAQ,CAAC,CAAC,CAC/BD,QAAQ,CAACE,MAAM,CAAC,MAAM,CAAEH,QAAQ,CAAC,CAAC,CAAC,CAAC,CAEpC,GAAI,CACF,KAAM,CAAAI,QAAQ,CAAG,KAAM,CAAAC,KAAK,IAAAC,MAAA,CAAIC,OAAO,CAACC,GAAG,CAACC,qBAAqB,aAAY,CAC3EC,MAAM,CAAE,MAAM,CACdC,IAAI,CAAEV,QACR,CAAC,CAAC,CACF,KAAM,CAAAW,MAAM,CAAG,KAAM,CAAAR,QAAQ,CAACS,IAAI,CAAC,CAAC,CACpCC,OAAO,CAACC,GAAG,CAAC,gBAAgB,CAAEH,MAAM,CAAC,CACrC,GAAIA,MAAM,CAACI,QAAQ,CAAE,CACnBlB,QAAQ,CAAC,CAAC,GAAGD,KAAK,CAAEG,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,CACjCJ,YAAY,CAACgB,MAAM,CAACI,QAAQ,CAAC,CAAE;AACjC,CACF,CAAE,MAAOC,KAAK,CAAE,CACdH,OAAO,CAACG,KAAK,CAAC,uBAAuB,CAAEA,KAAK,CAAC,CAC/C,CACF,CAAC,CAED,KAAM,CAAAC,WAAW,CAAGA,CAAA,GAAM,CACxBpB,QAAQ,CAAC,EAAE,CAAC,CACZF,YAAY,CAAC,IAAI,CAAC,CAAE;AACtB,CAAC,CAED,mBACEL,IAAA,QAAK4B,SAAS,CAAC,SAAS,CAAAC,QAAA,cACtB3B,KAAA,QAAK0B,SAAS,CAAC,kBAAkB,CAAAC,QAAA,eAC/B7B,IAAA,CAACF,UAAU,EAACgC,YAAY,CAAEtB,gBAAiB,CAAE,CAAC,cAC9CR,IAAA,QAAK4B,SAAS,CAAC,WAAW,CAAAC,QAAA,CACvBvB,KAAK,CAACyB,MAAM,GAAK,CAAC,cACjB/B,IAAA,MAAA6B,QAAA,CAAG,wBAAsB,CAAG,CAAC,CAE7BvB,KAAK,CAAC0B,GAAG,CAAC,CAACC,IAAI,CAAEC,KAAK,gBAAKlC,IAAA,MAAA6B,QAAA,CAAgBI,IAAI,CAACE,IAAI,EAAjBD,KAAqB,CAAC,CAC1D,CACE,CAAC,cACNlC,IAAA,WAAQ4B,SAAS,CAAC,cAAc,CAACQ,OAAO,CAAET,WAAY,CAAAE,QAAA,CAAC,eAAa,CAAQ,CAAC,EAC1E,CAAC,CACH,CAAC,CAEV,CAEA,cAAe,CAAA1B,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}